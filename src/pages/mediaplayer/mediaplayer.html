<!--
  Generated template for the Mediaplayer page.

  See http://ionicframework.com/docs/v2/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>
  <ion-navbar color="grey-dark">
    <button ion-button menuToggle right>
      <ion-icon name="menu" color="secondary"></ion-icon>
    </button>
    <object type="image/svg+xml" data="assets/images/beerissimo_logo.svg" class="title-image" height="60">
      <img src="assets/images/beerissimo_logo.png" class="title-image" />
    </object>
    <p class="logged-in-as">Logged in as {{this.myUserName}}</p>
  </ion-navbar>
</ion-header>


<ion-content padding>
  <ion-item *ngIf="mediaFile.media_type === 'image'">
    <div class="post-content">

      <h2 id="username">{{user.username}}</h2>
      <h2 id="title">{{mediaFile.title}}</h2>
      <img [alt]="mediaFile.title" [src]="'http://media.mw.metropolia.fi/wbma/uploads/' + mediaFile.filename">
      <h3>{{mediaFile.description}}</h3>
      <p>Likes: {{this.favourites}}</p>
      <button ion-button *ngIf="!this.thisPostLiked" (click)="addFavourite(mediaFile.file_id)">Like</button>
      <button ion-button *ngIf="this.thisPostLiked" (click)="deleteFavourite(mediaFile.file_id)">Unlike</button>
    </div>
  </ion-item>

  <ion-item *ngIf="mediaFile.media_type === 'audio'">
    <div class="post-content">
      <h2 id="username">{{user.username}}</h2>
      <h2 id="title">{{mediaFile.title}}</h2>
      <audio controls>
        <source [src]="'http://media.mw.metropolia.fi/wbma/uploads/' + mediaFile.filename" [type]="mediaFile.mime_type"> Your browser does not support the audio tag.
      </audio>
      <h3>{{mediaFile.description}}</h3>
      <p>Likes: {{this.favourites}}</p>
      <button ion-button *ngIf="!this.thisPostLiked" (click)="addFavourite(mediaFile.file_id)">Like</button>
      <button ion-button *ngIf="this.thisPostLiked" (click)="deleteFavourite(mediaFile.file_id)">Unlike</button>
    </div>
  </ion-item>

  <ion-item *ngIf="mediaFile.media_type === 'video'">
    <div class="post-content">
      <h2 id="username">{{user.username}}</h2>
      <h2 id="title">{{mediaFile.title}}</h2>
      <video width="320" height="240" controls>
        <source [src]="'http://media.mw.metropolia.fi/wbma/uploads/' + mediaFile.filename" [type]="mediaFile.mime_type"> Your browser does not support the video tag.
      </video>
      <h3>{{mediaFile.description}}</h3>
      <p>Likes: {{this.favourites}}</p>
      <button ion-button *ngIf="!this.thisPostLiked" (click)="addFavourite(mediaFile.file_id)">Like</button>
      <button ion-button *ngIf="this.thisPostLiked" (click)="deleteFavourite(mediaFile.file_id)">Unlike</button>

    </div>
  </ion-item>
  <form class="comment-form" #commentForm="ngForm" (ngSubmit)="makeComment(commentForm.value)">
      <ion-textarea autosize placeholder="Add comment" name="comment" ngModel></ion-textarea>
      <button ion-button type="submit" [disabled]="!commentForm.valid">POST</button>
  </form>
</ion-content>
